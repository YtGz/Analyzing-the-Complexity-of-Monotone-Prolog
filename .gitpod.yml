image:
  file: .gitpod.Dockerfile
tasks:
  - init: |
      # monad-supply is not cloned yet, so we need to ignore the cabal.project file initially
      cabal update --ignore-project
      (mkdir lib && cd lib && git clone https://github.com/YtGz/monad-supply.git)
      # use hpack to generate monad-supply.cabal
      (cd lib/monad-supply && cabal install --ignore-project hpack && hpack)
      # fetch parsec-prolog library
      (cd lib && git clone https://github.com/acharal/parsec-prolog.git)
      # path of op.pl file is hardcoded in the parsec-prolog library
      sudo mkdir -p /home/angel/edu/phd/code/parsec-prolog/pl && sudo cp lib/parsec-prolog/pl/op.pl /home/angel/edu/phd/code/parsec-prolog/pl/op.pl
      # build camp
      cabal build

vscode:
  extensions:
    - haskell.haskell